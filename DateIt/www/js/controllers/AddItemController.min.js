var dateIt;(function(n){"use strict";var t=function(){function n(n,t,i,r){var u=this;this.$scope=n,this.$log=t,this.$location=i,this.datacontext=r,n.addDateItItem=function(n){return u.addDateItItem(n)},n.itemSelected=function(){return u.itemSelected()},n.dateItItem={expireDate:moment().toDate()},r.getItems().then(function(t){n.selected=undefined,n.items=t})}return n.prototype.injection=function(){return["$scope","$log","$location","datacontext",n]},n.prototype.itemSelected=function(){var n=this;this.datacontext.getItemByName(this.$scope.dateItItem.name).done(function(t){var i,r;n.$log.info(t),i=t[0],n.$scope.dateItItem.itemId=i.id,r=moment(),r.add("d",i.shelflifeInDays),n.$scope.dateItItem.expireDate=r.toDate()})},n.prototype.addDateItItem=function(n){var t=this;this.datacontext.getItemByName(this.$scope.dateItItem.name).done(function(i){if(t.$log.info(i),i.length==0){var r=moment(n.expireDate),u=r.diff(moment(),"days"),f={name:n.name,shelflifeInDays:u};t.datacontext.addItem(f)}}),this.datacontext.addDateItItem(n,function(){t.$location.path("/")})},n}();n.AddItemController=t})(dateIt||(dateIt={}))